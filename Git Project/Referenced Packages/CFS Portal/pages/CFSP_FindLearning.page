<apex:page controller="cfsp.CFSP_FindLearningController" showHeader="false" standardStylesheets="false" cache="false" docType="html-5.0" readOnly="true" id="pageFL">
	<apex:composition template="{!DynamicTemplate}">
		<apex:define name="body">
			<style>
				.selectAllCatalogsCFS {
					font-size: 85%;
				}
			</style>

			<apex:Form >
				<apex:actionFunction name="doAction" action="{!doAction}" rerender="lightboxWrapper" status="statusBox" oncomplete="actionHandler('{!lightBox.action.link}',{!lightBox.action.isSelf},{!lightBox.action.isJSAction});"><apex:param name="p15" value=""/></apex:actionFunction>

				<apex:outputPanel id="lightboxWrapper">
					<apex:outputPanel layout="none">
						<apex:outputPanel id="lightbox" layout="block" styleClass="lightbox" rendered="{!AND(NOT(ISBLANK(lightBox)),lightBox.enabled)}">
							<apex:outputPanel layout="block" styleClass="window">
								<apex:outputPanel layout="block" styleClass="header">
									<apex:outputPanel layout="block" styleClass="header-label">
										<apex:outputText styleClass="header-label-text" value="{!lightBox.windowHeader}"/>
									</apex:outputPanel>
									<a class="close" onclick="closeLightBox({!lightBox.action.needRefresh});"><i class="icon-large icon-remove icon-button"></i></a>
								</apex:outputPanel>
								<apex:outputPanel layout="block" styleClass="bracket">
									<apex:outputPanel layout="block" rendered="{!AND(NOT(ISBLANK(lightBox.messages)),lightBox.messages.size>0)}">
										<apex:repeat value="{!lightBox.messages}" var="message">
											<label class="emphasis"><apex:outputText value="{!message.label}"/></label>
											<apex:repeat value="{!message.items}" var="item">
												<label class="{!item.styleClass}">
													<apex:outputPanel layout="block" rendered="{!item.isFormatted}">
														<pre>
															<apex:outputText value="{!item.value}"/>
														</pre>
													</apex:outputPanel>
													<apex:outputPanel layout="block" rendered="{!NOT(item.isFormatted)}">
														<apex:outputPanel layout="block" rendered="{!item.isLink}">
															<apex:outputLink value="{!item.value}" id="theLink" target="_blank">
																{!item.value}
															</apex:outputLink>
														</apex:outputPanel>
														<apex:outputPanel layout="block" rendered="{!NOT(item.isLink)}">
															<apex:outputText value="{!item.value}"/>d
														</apex:outputPanel>
													</apex:outputPanel>
												</label>
											</apex:repeat>
										</apex:repeat>
									</apex:outputPanel>
									<apex:outputPanel layout="block" rendered="{!NOT(ISBLANK(lightBox.iframe))}">
										<iframe src="{!lightBox.iframe.src}" width="{!lightBox.iframe.width}" height="{!lightBox.iframe.height}" align="{!lightBox.iframe.align}" frameborder="{!lightBox.iframe.frameborder}" hspace="{!lightBox.iframe.hspace}" scrolling="{!lightBox.iframe.scrolling}"></iframe>
									</apex:outputPanel>
									<apex:outputPanel layout="block" rendered="{!AND(NOT(ISBLANK(lightBox.inputs)),lightBox.inputs.size>0)}">
										<div class="control-group" style="text-align:center; width:100%;">
											<apex:repeat value="{!lightBox.inputs}" var="input">
												<apex:outputText value="{!input.label}"/>&nbsp;
												<apex:inputText value="{!input.value}" maxlength="{!input.maxLength}"/>
											</apex:repeat>
										</div>
									</apex:outputPanel>
									<apex:outputPanel layout="block" rendered="{!AND(NOT(ISBLANK(lightBox.buttons)),lightBox.buttons.size>0)}">
										<div class="control-group" style="text-align:center; width:100%;">
											<apex:repeat value="{!lightBox.buttons}" var="button">
												<apex:outputPanel layout="none" rendered="{!button.isActionable}">
													<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(button.action)),button.label != $Label.CFSP_COMMON_POPUP_BUTTON_OK)}">
														<button class="{!button.styleClass}" type="button" style="margin: 0 20px;" onclick="doActionInvoke('{!JSENCODE(button.action)}',{!button.isRemote});"><apex:outputText value="{!HTMLENCODE(button.label)}"/></button>
													</apex:outputPanel>
													<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(button.action)),button.label == $Label.CFSP_COMMON_POPUP_BUTTON_OK)}">
														<button class="{!button.styleClass}" type="button" style="margin: 0 20px;" onclick="doAction('{!JSENCODE(button.action)}');"><apex:outputText value="{!HTMLENCODE(button.label)}"/></button>
													</apex:outputPanel>
													<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(button.jsAction))}">
														<button class="{!button.styleClass}" type="button" style="margin: 0 20px;" onclick="{!JSENCODE(button.jsAction)}"><apex:outputText value="{!HTMLENCODE(button.label)}"/></button>
													</apex:outputPanel>
												</apex:outputPanel>
												<apex:outputPanel layout="none" rendered="{!NOT(button.isActionable)}">
													<button class="{!button.styleClass}" type="button" style="margin: 0 20px;"><apex:outputText value="{!button.label}"/></button>
												</apex:outputPanel>
											</apex:repeat>
										</div>
									</apex:outputPanel>
									<apex:outputPanel layout="block" rendered="{!NOT(ISBLANK(lightBox.table))}">
										<div class="agenda-container">
											<table class="{!lightBox.table.tableClass} details">
												<tr class="expanded"><apex:repeat var="row" value="{!lightBox.table.rowHeader.values}"><th>{!row}</th></apex:repeat></tr>
												<apex:repeat var="rows" value="{!lightBox.table.rows}">
													<tr><apex:repeat var="row" value="{!rows}">
														<apex:outputPanel layout="none" rendered="{!row.isText}"><td>{!row.textValue}</td></apex:outputPanel>
														<apex:outputPanel layout="none" rendered="{!row.isLink}">
															<td><apex:repeat var="link" value="{!row.links}">
																<a title="{!link.linkTitle}" target="{!link.linkTarget}" href="{!link.linkValue}">{!link.linkName}</a><br/>
															</apex:repeat></td>
														</apex:outputPanel>
													</apex:repeat></tr>
												</apex:repeat>
											</table>
										</div>
									</apex:outputPanel>
								</apex:outputPanel>
							</apex:outputPanel>
						</apex:outputPanel>
					</apex:outputPanel>
				</apex:outputPanel>
			</apex:Form>

			<apex:outputPanel id="content" layout="block">
				<div class="container-fluid pad">

					<!-- ApexMessages Container -->
					<apex:outputPanel layout="block" styleClass="container-fluid" id="pageMessageBox">
						<apex:outputPanel layout="block" styleClass="row-fluid">
							<apex:outputPanel layout="none" rendered="{!pageHasMessages}">
								<apex:outputPanel layout="block" styleClass="alert alert-{!severity} span12">
									<apex:messages layout="table" id="pageMessages"/>
								</apex:outputPanel>
							</apex:outputPanel>
						</apex:outputPanel>
					</apex:outputPanel>

					


					<apex:outputPanel id="content2" styleClass="row-fluid" layout="block" rendered="{!IF(AND(AND(anonymousSearching == false,enabledAnonymousRedirectUrl == false),isGuestUser == true),false,true)}">
						<div id="apart" class="span2">
							<apex:Form id="form1">

								<apex:actionFunction name="applyFilter" action="{!ApplyFilter}" status="statusBox" rerender="content2,pageMessageBox" oncomplete="defineSettings();"></apex:actionFunction>
								<apex:actionFunction name="updateLocationsPicklistFromJS" action="{!filter.updateLocationsPicklist}" rerender="controls-locations" oncomplete="displaySelectLongValues();"></apex:actionFunction>
								<apex:actionFunction name="selectUnselectCatalogsPicklistFromJS" action="{!filter.selectUnselectCatalogsPicklist}" rerender="controls-catalogs" oncomplete="updateLocationsPicklistFromJS();"></apex:actionFunction>

								<div class="well sidebar-nav">
									<div class="controls">
										<apex:commandButton styleClass="btn btn-primary" value="{!$Label.CFSP_PAGE_FIND_LEARNING_BUTTON_APPLY_FILTER}" action="{!ApplyFilter}" status="statusBox" rerender="content2,selectAllCatalogsCFSLink,pageMessageBox" oncomplete="defineSettings();"/>
										<apex:commandButton styleClass="btn" value="{!$Label.CFSP_PAGE_FIND_LEARNING_BUTTON_RESET_FILTER}" action="{!Reset}" status="statusBox" rerender="content2,selectAllCatalogsCFSLink,pageMessageBox" oncomplete="defineSettings();"/>
									</div>
									<hr/>
									<div class="controls keywordsSectionFilter">
										<label class="headline">{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_KEYWORDS}</label>
										<apex:inputText styleClass="span12" value="{!filter.searchKeyword}"/>
										<label class="checkbox"><apex:inputCheckbox value="{!filter.searchDescription}"/>{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_SEARCH_DESCRIPTION}</label>
									</div>
									<hr class="keywordsSectionFilter"/>
									<apex:outputPanel layout="none" rendered="{!isILTInstalled}">
										<apex:outputPanel layout="block" styleClass="controls trainingTypeSectionFilter" id="controls-training-type">
											<label class="headline">{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_TRAINING_TYPE}</label>
											<label class="checkbox"><apex:inputCheckbox value="{!filter.searchSPO}"/>{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_TRAINING_TYPE_ONLINE}</label>
											<label class="checkbox"><apex:inputCheckbox value="{!filter.searchILL}"/>{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_TRAINING_TYPE_ILT}</label>
										</apex:outputPanel>
										<hr class="trainingTypeSectionFilter"/>
										<apex:repeat value="{!filter.dFilterList}" var="dyn" id="controls-dynamic-filters">
											<apex:outputPanel layout="none" rendered="{!dyn.isDisplayInput}">
												<apex:outputPanel layout="block" styleClass="controls" rendered="{!dyn.isDefaultInput}">
													<label class="headline">{!dyn.displayLabel}</label>
													<apex:inputText styleClass="span12" value="{!dyn.inputValue}"/>
												</apex:outputPanel>
												<apex:outputPanel layout="block" styleClass="controls" rendered="{!dyn.isMultiPicklist}">
													<label class="headline">{!dyn.displayLabel}</label>
													<apex:selectList styleClass="span12 fl-catalog-sellist" value="{!dyn.inputPickListValue}" multiselect="true" size="5">
														<apex:selectOptions value="{!dyn.pickListValues}"/>
													</apex:selectList>
												</apex:outputPanel>
												<apex:outputPanel layout="block" styleClass="controls" rendered="{!dyn.isPicklist}">
													<label class="headline">{!dyn.displayLabel}</label>
													<apex:selectList styleClass="span12 fl-catalog-sellist" value="{!dyn.inputPickListValueSingle}" multiselect="false" size="5">
														<apex:selectOptions value="{!dyn.pickListValues}"/>
													</apex:selectList>
												</apex:outputPanel>
											</apex:outputPanel>
										</apex:repeat>
									<apex:outputPanel layout="none" rendered="{!IF(filter.dFilterList.size > 0, true, false)}"><hr/></apex:outputPanel>
									<apex:outputPanel layout="block" styleClass="controls dateRangeSectionFilter" id="controls-date-range">
										<label class="headline">{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_DATE_RANGE}</label>
										<apex:outputPanel layout="block" styleClass="control-group span12 inline">
											<label class="control-label span4" >{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_DATE_RANGE_FROM}</label>
											<div id="eventDateTime" class="span11 input-append date date-time-picker">
												<apex:inputText id="date-from" styleClass="span10" value="{!filter.dateRangeFrom}"/>
												<span class="add-on"><i class="icon-calendar"></i></span>
											</div>
										</apex:outputPanel>
										<apex:outputPanel layout="block" styleClass="control-group span12 inline">
											<label class="control-label span4" >{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_DATE_RANGE_TO}</label>
											<div id="eventDateTimeTo" class="span11 input-append date date-time-picker">
												<apex:inputText id="date-to" styleClass="span10" value="{!filter.dateRangeTo}"/>
												<span class="add-on"><i class="icon-calendar"></i></span>
											</div>
										</apex:outputPanel>
									</apex:outputPanel>
									<hr class="dateRangeSectionFilter"/>
									<apex:outputPanel layout="block" styleClass="controls locationsSectionFilter" id="controls-locations">
										<label class="headline">{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_LOCATIONS}</label>
										<apex:selectList styleClass="span12 fl-location-sellist" value="{!filter.selectedLocation}" multiselect="true" size="5">
											<apex:selectOptions value="{!filter.allLocations}"/>
										</apex:selectList>
									</apex:outputPanel>
									<hr class="locationsSectionFilter"/>
									</apex:outputPanel>
									<apex:outputPanel layout="block" styleClass="controls catalogsSectionFilter" id="controls-catalogs">
										<label class="headline">{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_CATALOGS}</label>
										<apex:outputLink id="selectAllCatalogsCFSLink" styleClass="selectAllCatalogsCFS" value="javascript:void(0);" onclick="selectUnselectCatalogsPicklistFromJS();">
											<apex:outputText value="{!IF(filter.showAllCatalogs,$Label.CFSP_PAGE_FIND_LEARNING_LABEL_UNSELECT_ALL,$Label.CFSP_PAGE_FIND_LEARNING_LABEL_SELECT_ALL)}"/>
										</apex:outputLink>
										<apex:selectList styleClass="span12 fl-catalog-sellist" value="{!filter.selectedCatalog}" multiselect="true" size="5">
											<apex:selectOptions value="{!filter.allCatalogs}"/>
											<apex:actionSupport event="onchange" action="{!filter.updateLocationsPicklist}" oncomplete="displaySelectLongValues();" rerender="selectAllCatalogsCFSLink,controls-locations" />
										</apex:selectList>
									</apex:outputPanel>
									<hr class="catalogsSectionFilter"/>
									<div class="controls">
										<apex:commandButton styleClass="btn btn-primary" value="{!$Label.CFSP_PAGE_FIND_LEARNING_BUTTON_APPLY_FILTER}" action="{!ApplyFilter}" rerender="content2,selectAllCatalogsCFSLink,pageMessageBox" status="statusBox" oncomplete="defineSettings();"/>
										<apex:commandButton styleClass="btn" value="{!$Label.CFSP_PAGE_FIND_LEARNING_BUTTON_RESET_FILTER}" action="{!Reset}" rerender="content2,selectAllCatalogsCFSLink,pageMessageBox" status="statusBox" oncomplete="defineSettings();"/>
									</div>
								</div>
							</apex:Form>
						</div>

						<apex:outputPanel layout="block" styleClass="span10" rendered="{!AND(filter.selectedCatalog.size=0,table.size=0)}">
							<apex:outputPanel layout="block" styleClass="alert alert-info">
								<apex:outputText value="{!$Label.CFSP_PAGE_FIND_LEARNING_ERROR_SELECT_CATALOGS}"/>
							</apex:outputPanel>
						</apex:outputPanel>

						<apex:outputPanel layout="block" id="part" styleClass="span10" rendered="{!filter.selectedCatalog.size!=0}">
							<apex:Form >
								<apex:actionFunction name="refreshPage" action="{!refreshPage}" rerender="content" status="statusBox" oncomplete="defineSettings();"></apex:actionFunction>
								<apex:actionFunction name="getPage" action="{!getPage}" rerender="content" status="statusBox" oncomplete="defineSettings();"><apex:param name="pn" value=""/></apex:actionFunction>
								<apex:actionFunction name="getFirstPage" action="{!getFirstPage}" rerender="content" status="statusBox" oncomplete="defineSettings();"></apex:actionFunction>
								<apex:actionFunction name="getLastPage" action="{!getLastPage}" rerender="content" status="statusBox" oncomplete="defineSettings();"></apex:actionFunction>
								<apex:actionFunction name="getNextPageOffset" action="{!getNextPageOffset}" rerender="content" status="statusBox" oncomplete="defineSettings();"></apex:actionFunction>
								<apex:actionFunction name="getPreviousPageOffset" action="{!getPreviousPageOffset}" rerender="content" status="statusBox" oncomplete="defineSettings();"></apex:actionFunction>

								<div class="control-group">
									<apex:outputPanel layout="none" rendered="{!AND(!ISBLANK(allResultSize),allResultSize>0)}">
										<label class="control-label pull-left result">{!allResultSize} {!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_RESULTS_FOUND}</label>
									</apex:outputPanel>

									<div class="pagination pagination-right">
										<ul>
											<apex:outputPanel layout="none" rendered="{!AND(!ISBLANK(allPagesSize),allPagesSize>5)}">
												<li><a href="javascript:getFirstPage();" style="letter-spacing: -5px;">&#9668;&#9668;</a></li>
												<li><a href="javascript:getPreviousPageOffset();">&#9668;</a></li>
											</apex:outputPanel>

											<apex:repeat value="{!displayedPages}" var="page" rendered="{!AND(!ISBLANK(allPagesSize),allPagesSize!=0)}">
												<apex:outputPanel layout="none" rendered="{!page=pageNumber}">
													<li class="{!IF(page=pageNumber, 'active','')}"><a href="javascript:void(0);" class="{!IF(page=pageNumber, 'selected-pagenumber','')}">{!page}</a></li>
												</apex:outputPanel>
												<apex:outputPanel layout="none" rendered="{!page!=pageNumber}">
													<li class="{!IF(page=pageNumber, 'active','')}"><a href="javascript:getPage({!page});" class="{!IF(page=pageNumber, 'selected-pagenumber','')}">{!page}</a></li>
												</apex:outputPanel>
											</apex:repeat>

											<apex:outputPanel layout="none" rendered="{!AND(!ISBLANK(allPagesSize),allPagesSize>5)}">
												<li><a href="javascript:getNextPageOffset();">&#9658;</a></li>
												<li><a href="javascript:getLastPage();" style="letter-spacing: -5px;">&#9658;&#9658;</a></li>
											</apex:outputPanel>

											<apex:outputPanel layout="none" rendered="{!shopingCartPanel['enabled']}">
												<li><a href="{!shopingCartPanel['link']}">{!shopingCartPanel['label']}</a></li>
											</apex:outputPanel>
										</ul>
									</div>
								</div>
							</apex:Form>

							<div id="searchresult" class="row-fluid">
								<div class="nested-table">
									<apex:Form >
										<apex:actionFunction name="changeSort" action="{!changeSort}" rerender="content" status="statusBox" oncomplete="defineSettings();"><apex:param name="sc" value=""/><apex:param name="sd" value=""/></apex:actionFunction>

										<table class="outer-table find-learning-table">
											<thead>
												<tr>
													<apex:repeat value="{!columns}" var="columnHeader">
														<apex:outputPanel layout="none" rendered="{!columnHeader.isDisplayColumn}">
															<apex:outputPanel layout="none" rendered="{!columnHeader.isCommon}">
																<apex:outputPanel layout="none" rendered="{!columnHeader.isSortableHeader}">
																	<th class="{!columnHeader.className}" onclick="changeSort({!columnHeader.index},{!filter.sortASC});">
																		<div class="{!IF(filter.orderColumn=columnHeader.index,IF(filter.sortASC, 'sort srt-asc','sort srt-desc'),'')}"></div>{!$Label[columnHeader.label]}
																	</th>
																</apex:outputPanel>
																<apex:outputPanel layout="none" rendered="{!NOT(columnHeader.isSortableHeader)}">
																	<th class="unsortable-header {!columnHeader.className}">{!IF(ISBLANK(columnHeader.label),columnHeader.customLabel,$Label[columnHeader.label])}</th>
																</apex:outputPanel>
															</apex:outputPanel>
															<apex:outputPanel layout="none" rendered="{!columnHeader.isCustom}">
																<th class="{!columnHeader.className}" onclick="changeSort({!columnHeader.index},{!filter.sortASC});">
																	<div class="{!IF(filter.orderColumn=columnHeader.index,IF(filter.sortASC, 'sort srt-asc','sort srt-desc'),'')}"></div>
																	{!IF(ISBLANK(columnHeader.label),columnHeader.customLabel,$Label[columnHeader.label])}
																</th>
															</apex:outputPanel>
														</apex:outputPanel>
													</apex:repeat>
												</tr>
											</thead>

											<tbody>

												<apex:outputPanel layout="none" rendered="{!table.size=0}"><tr><td colspan="{!enabledColumnsSize}"><apex:outputText value="{!$Label.CFSP_PAGE_FIND_LEARNING_TITLE_NO_RESULTS_FOUND}" /></td></tr></apex:outputPanel>
												<tr class="fork collapsed" style="display: none"><td>&nbsp;</td></tr>

												<apex:repeat value="{!table}" var="block1">
													<apex:repeat value="{!block1.block}" var="block2" >
														<tr class="fork expanded"><td colspan="{!enabledColumnsSize}"><table class="inner-table"><tbody>
															<apex:repeat value="{!block2.row}" var="row2">
																<tr>
																	<apex:repeat value="{!columns}" var="colLev2">
																		<apex:outputPanel layout="none" rendered="{!NOT(colLev2.isSimple)}">
																			<apex:outputPanel layout="none" rendered="{!colLev2.isTitle}"><td class="pin ct-title"><apex:outputPanel layout="none" rendered="{!OR(!row2.isItem, row2.isEvent)}"><a href="javascript:void(0);" class="knob-pos knob-indent1 {!IF(filter.isForceExpandLevels,'knob-neg','')}" name="knob"></a></apex:outputPanel>
																				<span class="cage indent1" ><a href="javascript:void(0);" class="title-desc-btn">{!row2.title}</a></span></td>
																			</apex:outputPanel>
																			<apex:outputPanel layout="none" rendered="{!AND(colLev2.isPrice,colLev2.isDisplayColumn)}">
																				<apex:outputPanel layout="none" rendered="{!row2[colLev2.getterName]['enabled']}">
																					<td class="ct-price">
																						<apex:outputPanel layout="none" rendered="{!row2[colLev2.getterName]['DiscountPriceFormattedEnable']}">
																							<span class="price-original-old"><del>{!row2[colLev2.getterName]['OriginalPriceFormatted']}</del></span>
																							<a href="#" title="{!IF(row2[colLev2.getterName]['DiscountReasonEnable'],row2[colLev2.getterName]['DiscountReason'],'')}" class="price-discount">
																								<span class="price-discount">{!row2[colLev2.getterName]['DiscountPriceFormatted']}</span>
																							</a>
																						</apex:outputPanel>
																						<apex:outputPanel layout="none" rendered="{!row2[colLev2.getterName]['DiscountPriceFormattedEnable']=false}">
																							<span class="price-original">{!row2[colLev2.getterName]['OriginalPriceFormatted']}</span>
																						</apex:outputPanel>
																					</td>
																				</apex:outputPanel>
																				<apex:outputPanel layout="none" rendered="{!!row2[colLev2.getterName]['enabled']}"><td class="ct-price">&nbsp;</td></apex:outputPanel>
																			</apex:outputPanel>
																			<apex:outputPanel layout="none" rendered="{!colLev2.isAction}">
																				<td class="ct-action">
																					<apex:outputPanel layout="none" rendered="{!row2.action['empty']}">&nbsp;</apex:outputPanel>
																					<apex:outputPanel layout="none" rendered="{!NOT(row2.action['empty'])}">
																						<apex:outputPanel layout="none" rendered="{!row2.action['isText']}">{!row2.action['textLabel']}</apex:outputPanel>
																						<apex:outputPanel layout="none" rendered="{!row2.action['isLink']}">
																							<apex:outputPanel layout="none" rendered="{!row2.action['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row2.action['linkValue']}')">{!row2.action['linkLabel']}</a></apex:outputPanel>
																							<apex:outputPanel layout="none" rendered="{!NOT(row2.action['isActionable'])}"><a href="{!row2.action['linkValue']}" class="{!row2.action['linkClass']}" name="{!row2.action['linkName']}">{!row2.action['linkLabel']}</a></apex:outputPanel>
																						</apex:outputPanel>
																					</apex:outputPanel>
																				</td>
																			</apex:outputPanel>
																			<apex:outputPanel layout="none" rendered="{!colLev2.isURL}">
																				<td class="{!colLev2.className} ct-url">
																					<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(row2[colLev2.getterName]))}"><a target="_blank" href="{!row2[colLev2.getterName]}">{!row2[colLev2.getterName]}</a></apex:outputPanel>
																					<apex:outputPanel layout="none" rendered="{!ISBLANK(row2[colLev2.getterName])}">&nbsp;</apex:outputPanel>
																				</td>
																			</apex:outputPanel>
																		</apex:outputPanel>
																		<apex:outputPanel layout="none" rendered="{!AND(colLev2.isSimple, colLev2.isDisplayColumn)}">
																			<apex:outputPanel layout="none"><td class="{!colLev2.className}">{!row2[colLev2.getterName]}</td></apex:outputPanel>
																		</apex:outputPanel>
																	</apex:repeat>
																</tr>
																<tr class="type-Description" style ="display:{!showDescription}">
																	<td class="ct-description" colspan="{!enabledColumnsSize}"><span class="desc indent1">{!row2.description}&nbsp;</span></td>
																</tr>

																<apex:outputPanel layout="none" rendered="{!AND(row2.isItem, row2.isEvent)}">
																	<tr class="fork collapsed {!IF(filter.isForceExpandLevels,'expanded','')}">
																		<td colspan="{!enabledColumnsSize}">
																			<div class="agenda-container">
																				<table class="inner-table agenda">
																					<tr><apex:repeat value="{!columnsEvent}" var="colEventHeader2">
																							<th class="unsortable-header {!colEventHeader2.className}">{!$Label[colEventHeader2.label]}</th>
																					</apex:repeat></tr>

																					<apex:outputPanel layout="none" rendered="{!OR(ISBLANK(row2.event.classes), row2.event.classes.size=0)}">
																							<tr><td colspan="{!columnsEvent.size}"><span>{!$Label.CFSP_COMMON_LABEL_CLASSES_ENDED}</span></td></tr>
																					</apex:outputPanel>

																					<apex:repeat value="{!row2.event.classes}" var="class">
																						<apex:variable var="classColumnsCounter" value="{!IF(row2.event.enrolled,enabledClassColumns-1,enabledClassColumns)}"/>
																						<apex:repeat value="{!class.sessions}" var="session"><tr>
																							<apex:repeat value="{!columnsEvent}" var="colEvent2">
																								<apex:outputPanel layout="none" rendered="{!AND(classColumnsCounter>0,OR(colEvent2.isEventClass, colEvent2.isAction))}">
																									<td rowspan="{!class.sessions.size}" class="ct-eventclass {!colEvent2.className}">
																										<apex:outputPanel layout="none" rendered="{!colEvent2.isSimple}">{!class[colEvent2.getterName]}</apex:outputPanel>
																										<apex:outputPanel layout="none" rendered="{!NOT(colEvent2.isSimple)}">
																											<apex:outputPanel layout="none" rendered="{!colEvent2.isEventClassMaterials}">
																												<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(class.materials)), class.materials.size>0)}">
																													<a href="javascript:void(0);" onclick="doAction('{!class.materialsAction}');">{!$Label.CFSP_COMMON_LINK_DETAILS}</a>
																												</apex:outputPanel>
																												<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(class.materials)), class.materials.size=0)}">&nbsp;</apex:outputPanel>
																											</apex:outputPanel>
																											<apex:outputPanel layout="none" rendered="{!colEvent2.isAction}">
																												<apex:outputPanel layout="none" rendered="{!row2.action[class.classId]['empty']}">&nbsp;</apex:outputPanel>
																												<apex:outputPanel layout="none" rendered="{!NOT(row2.action[class.classId]['empty'])}">
																													<apex:outputPanel layout="none" rendered="{!row2.action[class.classId]['isText']}">{!row2.action[class.classId]['textLabel']}</apex:outputPanel>
																													<apex:outputPanel layout="none" rendered="{!row2.action[class.classId]['isLink']}">
																														<apex:outputPanel layout="none" rendered="{!row2.action[class.classId]['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row2.action[class.classId]['linkValue']}')">{!row2.action[class.classId]['linkLabel']}</a></apex:outputPanel>
																													</apex:outputPanel>
																												</apex:outputPanel>
																											</apex:outputPanel>
																										</apex:outputPanel>
																									</td>
																									<apex:variable var="classColumnsCounter" value="{!classColumnsCounter-1}"/>
																								</apex:outputPanel>
																								<apex:outputPanel layout="none" rendered="{!OR(colEvent2.isEventSession, AND(colEvent2.isAction,row2.event.enrolled))}">
																									<td class="ct-eventsession {!colEvent2.className} {!IF(session.inPast == true,'pastSession','')}">
																										<apex:outputPanel layout="none" rendered="{!colEvent2.isSimple}">{!session[colEvent2.getterName]}</apex:outputPanel>
																										<apex:outputPanel layout="none" rendered="{!NOT(colEvent2.isSimple)}">
																											<apex:outputPanel layout="none" rendered="{!colEvent2.isEventSessionLocation}">
																												<apex:outputPanel layout="none" rendered="{!AND(session.location.Name != NULL, session.location.action == NULL)}">
																													{!session[colEvent2.getterName]}
																												</apex:outputPanel>
																												<apex:outputPanel layout="none" rendered="{!session.location.action != NULL}">
																													<a href="javascript:void(0);" onclick="doAction('{!session.location.action}');">{!session[colEvent2.getterName]}</a>
																												</apex:outputPanel>
																											</apex:outputPanel>
																											<apex:outputPanel layout="none" rendered="{!colEvent2.isEventSessionInstructors}">{!session[colEvent2.getterName]}</apex:outputPanel>
																											<apex:outputPanel layout="none" rendered="{!colEvent2.isAction}">
																												<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(session.joinURL))}">
																													<apex:outputLink value="{!session.joinURL}" target="_blank">{!$Label.CFSP_COMMON_LINK_JOIN}</apex:outputLink>
																												</apex:outputPanel>
																												<apex:outputPanel layout="none" rendered="{!ISBLANK(session.joinURL)}">
																													&nbsp;
																												</apex:outputPanel>
																											</apex:outputPanel>
																										</apex:outputPanel>
																									</td>
																								</apex:outputPanel>
																							</apex:repeat></tr>
																						</apex:repeat>
																					</apex:repeat>
																			</table></div>
																		</td>
																	</tr>
																</apex:outputPanel>
																<apex:repeat value="{!block2.block}" var="block3" >
																	<tr class="fork collapsed {!IF(filter.isForceExpandLevels,'expanded','')}"><td colspan="{!enabledColumnsSize}"><table class="tier-table"><tbody>
																		<apex:repeat value="{!block3.row}" var="row3">
																			<tr class="collapsed {!IF(filter.isForceExpandLevels,'expanded','')}">
																				<apex:repeat value="{!columns}" var="colLev3">
																					<apex:outputPanel layout="none" rendered="{!NOT(colLev3.isSimple)}">
																						<apex:outputPanel layout="none" rendered="{!colLev3.isTitle}"><td class="pin ct-title"><apex:outputPanel layout="none" rendered="{!OR(!row3.isItem, row3.isEvent)}"><a href="javascript:void(0);" class="knob-pos knob-indent2 {!IF(filter.isForceExpandLevels,'knob-neg','')}" name="knob"></a></apex:outputPanel>
																							<span class="cage indent2" >
																								<a href="javascript:void(0);" class="title-desc-btn">{!row3.title}</a>
																							</span></td>
																						</apex:outputPanel>
																						<apex:outputPanel layout="none" rendered="{!AND(colLev3.isPrice,colLev3.isDisplayColumn)}"><td class="ct-price">&nbsp;</td></apex:outputPanel>
																						<apex:outputPanel layout="none" rendered="{!colLev3.isAction}">
																							<td class="ct-action">
																								<apex:outputPanel layout="none" rendered="{!row3.action['empty']}">&nbsp;</apex:outputPanel>
																								<apex:outputPanel layout="none" rendered="{!NOT(row3.action['empty'])}">
																									<apex:outputPanel layout="none" rendered="{!row3.action['isText']}">{!row3.action['textLabel']}</apex:outputPanel>
																									<apex:outputPanel layout="none" rendered="{!row3.action['isLink']}">
																										<apex:outputPanel layout="none" rendered="{!row3.action['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row3.action['linkValue']}')">{!row3.action['linkLabel']}</a></apex:outputPanel>
																										<apex:outputPanel layout="none" rendered="{!NOT(row3.action['isActionable'])}"><a href="{!row3.action['linkValue']}" class="{!row3.action['linkClass']}" name="{!row3.action['linkName']}">{!row3.action['linkLabel']}</a></apex:outputPanel>
																									</apex:outputPanel>
																								</apex:outputPanel>
																							</td>
																						</apex:outputPanel>
																						<apex:outputPanel layout="none" rendered="{!colLev3.isURL}">
																							<td class="{!colLev3.className} ct-url">
																								<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(row3[colLev3.getterName]))}"><a target="_blank" href="{!row3[colLev3.getterName]}">{!row3[colLev3.getterName]}</a></apex:outputPanel>
																								<apex:outputPanel layout="none" rendered="{!ISBLANK(row3[colLev3.getterName])}">&nbsp;</apex:outputPanel>
																							</td>
																						</apex:outputPanel>
																					</apex:outputPanel>
																					<apex:outputPanel layout="none" rendered="{!AND(colLev3.isSimple, colLev3.isDisplayColumn)}">
																						<apex:outputPanel layout="none"><td class="{!colLev3.className}">{!IF(colLev3.customLabel == $Label.CFSP_COMMON_LABEL_TRAINING_UNIT_COST,' ',row3[colLev3.getterName])}</td></apex:outputPanel>
																					</apex:outputPanel>
																				</apex:repeat>
																			</tr>
																			<tr class="collapsed type-Description" style ="display:{!showDescription}">
																				<td class="ct-description" colspan="{!enabledColumnsSize}"><span class="desc indent2">{!row3.description}&nbsp;</span></td>
																			</tr>

																			<apex:outputPanel layout="none" rendered="{!AND(row3.isItem, row3.isEvent)}">
																				<tr class="fork collapsed {!IF(filter.isForceExpandLevels,'expanded','')}">
																					<td colspan="{!enabledColumnsSize}">
																						<div class="agenda-container">
																							<table class="inner-table agenda">
																								<tr><apex:repeat value="{!columnsEvent}" var="colEventHeader3">
																									<th class="unsortable-header {!colEventHeader3.className}">{!$Label[colEventHeader3.label]}</th>
																								</apex:repeat></tr>

																								<apex:outputPanel layout="none" rendered="{!OR(ISBLANK(row3.event.classes), row3.event.classes.size=0)}">
																									<tr><td colspan="{!columnsEvent.size}"><span>{!$Label.CFSP_COMMON_LABEL_CLASSES_ENDED}</span></td></tr>
																								</apex:outputPanel>

																								<apex:repeat value="{!row3.event.classes}" var="class">
																									<apex:variable var="classColumnsCounter" value="{!IF(row3.event.enrolled,enabledClassColumns-1,enabledClassColumns)}"/>
																									<apex:repeat value="{!class.sessions}" var="session"><tr>
																										<apex:repeat value="{!columnsEvent}" var="colEvent3">
																											<apex:outputPanel layout="none" rendered="{!AND(classColumnsCounter>0,OR(colEvent3.isEventClass, colEvent3.isAction))}">
																												<td rowspan="{!class.sessions.size}" class="ct-eventclass {!colEvent3.className}">
																													<apex:outputPanel layout="none" rendered="{!colEvent3.isSimple}">{!class[colEvent3.getterName]}</apex:outputPanel>
																													<apex:outputPanel layout="none" rendered="{!NOT(colEvent3.isSimple)}">
																														<apex:outputPanel layout="none" rendered="{!colEvent3.isEventClassMaterials}">
																															<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(class.materials)), class.materials.size>0)}">
																																<a href="javascript:void(0);" onclick="doAction('{!class.materialsAction}');">{!$Label.CFSP_COMMON_LINK_DETAILS}</a>
																															</apex:outputPanel>
																															<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(class.materials)), class.materials.size=0)}">&nbsp;</apex:outputPanel>
																														</apex:outputPanel>
																														<apex:outputPanel layout="none" rendered="{!colEvent3.isAction}">
																															<apex:outputPanel layout="none" rendered="{!row3.action[class.classId]['empty']}">&nbsp;</apex:outputPanel>
																															<apex:outputPanel layout="none" rendered="{!NOT(row3.action[class.classId]['empty'])}">
																																<apex:outputPanel layout="none" rendered="{!row3.action[class.classId]['isText']}">{!row3.action[class.classId]['textLabel']}</apex:outputPanel>
																																<apex:outputPanel layout="none" rendered="{!row3.action[class.classId]['isLink']}">
																																	<apex:outputPanel layout="none" rendered="{!row3.action[class.classId]['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row3.action[class.classId]['linkValue']}')">{!row3.action[class.classId]['linkLabel']}</a></apex:outputPanel>
																																</apex:outputPanel>
																															</apex:outputPanel>
																														</apex:outputPanel>
																													</apex:outputPanel>
																												</td>
																												<apex:variable var="classColumnsCounter" value="{!classColumnsCounter-1}"/>
																											</apex:outputPanel>
																											<apex:outputPanel layout="none" rendered="{!OR(colEvent3.isEventSession, AND(colEvent3.isAction,row3.event.enrolled))}">
																												<td class="ct-eventsession {!colEvent3.className} {!IF(session.inPast == true,'pastSession','')}">
																													<apex:outputPanel layout="none" rendered="{!colEvent3.isSimple}">{!session[colEvent3.getterName]}</apex:outputPanel>
																													<apex:outputPanel layout="none" rendered="{!NOT(colEvent3.isSimple)}">
																														<apex:outputPanel layout="none" rendered="{!colEvent3.isEventSessionLocation}">
																															<apex:outputPanel layout="none" rendered="{!AND(session.location.Name != NULL, session.location.action == NULL)}">
																																{!session[colEvent3.getterName]}
																															</apex:outputPanel>
																															<apex:outputPanel layout="none" rendered="{!session.location.action != NULL}">
																																<a href="javascript:void(0);" onclick="doAction('{!session.location.action}');">{!session[colEvent3.getterName]}</a>
																															</apex:outputPanel>
																														</apex:outputPanel>
																														<apex:outputPanel layout="none" rendered="{!colEvent3.isEventSessionInstructors}">{!session[colEvent3.getterName]}</apex:outputPanel>
																														<apex:outputPanel layout="none" rendered="{!colEvent3.isAction}">
																															<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(session.joinURL))}">
																																<apex:outputLink value="{!session.joinURL}" target="_blank">{!$Label.CFSP_COMMON_LINK_JOIN}</apex:outputLink>
																															</apex:outputPanel>
																															<apex:outputPanel layout="none" rendered="{!ISBLANK(session.joinURL)}">&nbsp;</apex:outputPanel>
																														</apex:outputPanel>
																													</apex:outputPanel>
																												</td>
																											</apex:outputPanel>
																										</apex:repeat></tr>
																									</apex:repeat>
																								</apex:repeat>
																						</table></div>
																					</td>
																				</tr>
																			</apex:outputPanel>

																			<apex:repeat value="{!block3.block}" var="block4" >
																				<tr class="fork collapsed {!IF(filter.isForceExpandLevels,'expanded','')}"><td colspan="{!enabledColumnsSize}"><table class="tier-table"><tbody>
																					<apex:repeat value="{!block4.row}" var="row4">
																						<tr class="collapsed {!IF(filter.isForceExpandLevels,'expanded','')}">
																							<apex:repeat value="{!columns}" var="colLev4">
																								<apex:outputPanel layout="none" rendered="{!NOT(colLev4.isSimple)}">
																									<apex:outputPanel layout="none" rendered="{!colLev4.isTitle}"><td class="pin ct-title"><apex:outputPanel layout="none" rendered="{!OR(!row4.isItem, row4.isEvent)}"><a href="javascript:void(0);" class="knob-pos knob-indent3 {!IF(filter.isForceExpandLevels,'knob-neg','')}" name="knob"></a></apex:outputPanel>
																										<span class="cage indent3" >
																											<a href="javascript:void(0);" class="title-desc-btn">{!row4.title}</a>
																										</span></td>
																									</apex:outputPanel>
																									<apex:outputPanel layout="none" rendered="{!AND(colLev4.isPrice,colLev4.isDisplayColumn)}"><td class="ct-price">&nbsp;</td></apex:outputPanel>
																									<apex:outputPanel layout="none" rendered="{!colLev4.isAction}">
																										<td class="ct-action">
																											<apex:outputPanel layout="none" rendered="{!row4.action['empty']}">&nbsp;</apex:outputPanel>
																											<apex:outputPanel layout="none" rendered="{!NOT(row4.action['empty'])}">
																												<apex:outputPanel layout="none" rendered="{!row4.action['isText']}">{!row4.action['textLabel']}</apex:outputPanel>
																												<apex:outputPanel layout="none" rendered="{!row4.action['isLink']}">
																													<apex:outputPanel layout="none" rendered="{!row4.action['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row4.action['linkValue']}')">{!row4.action['linkLabel']}</a></apex:outputPanel>
																													<apex:outputPanel layout="none" rendered="{!NOT(row4.action['isActionable'])}"><a href="{!row4.action['linkValue']}" class="{!row4.action['linkClass']}" name="{!row4.action['linkName']}">{!row4.action['linkLabel']}</a></apex:outputPanel>
																												</apex:outputPanel>
																											</apex:outputPanel>
																										</td>
																									</apex:outputPanel>
																									<apex:outputPanel layout="none" rendered="{!colLev4.isURL}">
																										<td class="{!colLev4.className} ct-url">
																											<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(row4[colLev4.getterName]))}"><a target="_blank" href="{!row4[colLev4.getterName]}">{!row4[colLev4.getterName]}</a></apex:outputPanel>
																											<apex:outputPanel layout="none" rendered="{!ISBLANK(row4[colLev4.getterName])}">&nbsp;</apex:outputPanel>
																										</td>
																									</apex:outputPanel>
																								</apex:outputPanel>
																								<apex:outputPanel layout="none" rendered="{!AND(colLev4.isSimple, colLev4.isDisplayColumn)}">
																									<apex:outputPanel layout="none"><td class="{!colLev4.className}">{!IF(colLev4.customLabel == $Label.CFSP_COMMON_LABEL_TRAINING_UNIT_COST,' ',row4[colLev4.getterName])}</td></apex:outputPanel>
																								</apex:outputPanel>
																							</apex:repeat>
																						</tr>
																						<tr class="collapsed type-Description" style ="display:{!showDescription}">
																							<td class="ct-description" colspan="{!enabledColumnsSize}"><span class="desc indent3">{!row4.description}&nbsp;</span></td>
																						</tr>

																						<apex:outputPanel layout="none" rendered="{!AND(row4.isItem, row4.isEvent)}">
																							<tr class="fork collapsed {!IF(filter.isForceExpandLevels,'expanded','')}">
																								<td colspan="{!enabledColumnsSize}">
																									<div class="agenda-container">
																										<table class="inner-table agenda">
																											<tr><apex:repeat value="{!columnsEvent}" var="colEventHeader4">
																												<th class="unsortable-header {!colEventHeader4.className}">{!$Label[colEventHeader4.label]}</th>
																											</apex:repeat></tr>

																											<apex:outputPanel layout="none" rendered="{!OR(ISBLANK(row4.event.classes), row4.event.classes.size=0)}">
																													<tr><td colspan="{!columnsEvent.size}"><span>{!$Label.CFSP_COMMON_LABEL_CLASSES_ENDED}</span></td></tr>
																											</apex:outputPanel>

																											<apex:repeat value="{!row4.event.classes}" var="class">
																												<apex:variable var="classColumnsCounter" value="{!IF(row4.event.enrolled,enabledClassColumns-1,enabledClassColumns)}"/>
																												<apex:repeat value="{!class.sessions}" var="session"><tr>
																													<apex:repeat value="{!columnsEvent}" var="colEvent4">
																														<apex:outputPanel layout="none" rendered="{!AND(classColumnsCounter>0,OR(colEvent4.isEventClass, colEvent4.isAction))}">
																															<td rowspan="{!class.sessions.size}" class="ct-eventclass {!colEvent4.className}">
																																<apex:outputPanel layout="none" rendered="{!colEvent4.isSimple}">{!class[colEvent4.getterName]}</apex:outputPanel>
																																<apex:outputPanel layout="none" rendered="{!NOT(colEvent4.isSimple)}">
																																	<apex:outputPanel layout="none" rendered="{!colEvent4.isEventClassMaterials}">
																																		<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(class.materials)), class.materials.size>0)}">
																																			<a href="javascript:void(0);" onclick="doAction('{!class.materialsAction}');">{!$Label.CFSP_COMMON_LINK_DETAILS}</a>
																																		</apex:outputPanel>
																																		<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(class.materials)), class.materials.size=0)}">&nbsp;</apex:outputPanel>
																																	</apex:outputPanel>
																																	<apex:outputPanel layout="none" rendered="{!colEvent4.isAction}">
																																		<apex:outputPanel layout="none" rendered="{!row4.action[class.classId]['empty']}">&nbsp;</apex:outputPanel>
																																		<apex:outputPanel layout="none" rendered="{!NOT(row4.action[class.classId]['empty'])}">
																																			<apex:outputPanel layout="none" rendered="{!row4.action[class.classId]['isText']}">{!row4.action[class.classId]['textLabel']}</apex:outputPanel>
																																			<apex:outputPanel layout="none" rendered="{!row4.action[class.classId]['isLink']}">
																																				<apex:outputPanel layout="none" rendered="{!row4.action[class.classId]['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row4.action[class.classId]['linkValue']}')">{!row4.action[class.classId]['linkLabel']}</a></apex:outputPanel>
																																			</apex:outputPanel>
																																		</apex:outputPanel>
																																	</apex:outputPanel>
																																</apex:outputPanel>
																															</td>
																															<apex:variable var="classColumnsCounter" value="{!classColumnsCounter-1}"/>
																														</apex:outputPanel>
																														<apex:outputPanel layout="none" rendered="{!OR(colEvent4.isEventSession, AND(colEvent4.isAction,row4.event.enrolled))}">
																															<td class="ct-eventsession {!colEvent4.className} {!IF(session.inPast == true,'pastSession','')}">
																																<apex:outputPanel layout="none" rendered="{!colEvent4.isSimple}">{!session[colEvent4.getterName]}</apex:outputPanel>
																																<apex:outputPanel layout="none" rendered="{!NOT(colEvent4.isSimple)}">
																																	<apex:outputPanel layout="none" rendered="{!colEvent4.isEventSessionLocation}">
																																		<apex:outputPanel layout="none" rendered="{!AND(session.location.Name != NULL, session.location.action == NULL)}">
																																			{!session[colEvent4.getterName]}
																																		</apex:outputPanel>
																																		<apex:outputPanel layout="none" rendered="{!session.location.action != NULL}">
																																			<a href="javascript:void(0);" onclick="doAction('{!session.location.action}');">{!session[colEvent4.getterName]}</a>
																																		</apex:outputPanel>
																																	</apex:outputPanel>
																																	<apex:outputPanel layout="none" rendered="{!colEvent4.isEventSessionInstructors}">{!session[colEvent4.getterName]}</apex:outputPanel>
																																	<apex:outputPanel layout="none" rendered="{!colEvent4.isAction}">
																																		<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(session.joinURL))}">
																																			<apex:outputLink value="{!session.joinURL}" target="_blank">{!$Label.CFSP_COMMON_LINK_JOIN}</apex:outputLink>
																																		</apex:outputPanel>
																																		<apex:outputPanel layout="none" rendered="{!ISBLANK(session.joinURL)}">&nbsp;</apex:outputPanel>
																																		<apex:outputPanel layout="none" rendered="{!AND(row4.action[class.classId]['isLink'], NOT(row4.event.enrolled))}">
																																			<apex:outputPanel layout="none" rendered="{!row4.action[class.classId]['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row4.action[class.classId]['linkValue']}')">{!row4.action[class.classId]['linkLabel']}</a></apex:outputPanel>
																																		</apex:outputPanel>
																																	</apex:outputPanel>
																																</apex:outputPanel>
																															</td>
																														</apex:outputPanel>
																													</apex:repeat></tr>
																												</apex:repeat>
																											</apex:repeat>
																									</table></div>
																								</td>
																							</tr>
																						</apex:outputPanel>
																						<apex:repeat value="{!block4.block}" var="block5" >
																							<tr class="fork collapsed {!IF(filter.isForceExpandLevels,'expanded','')}"><td colspan="{!enabledColumnsSize}"><table class="tier-table"><tbody>
																								<apex:repeat value="{!block5.row}" var="row5">
																									<tr class="collapsed {!IF(filter.isForceExpandLevels,'expanded','')}">
																										<apex:repeat value="{!columns}" var="colLev5">
																											<apex:outputPanel layout="none" rendered="{!NOT(colLev5.isSimple)}">
																												<apex:outputPanel layout="none" rendered="{!colLev5.isTitle}"><td class="pin ct-title"><apex:outputPanel layout="none" rendered="{!OR(!row5.isItem, row5.isEvent)}"><a href="javascript:void(0);" class="knob-pos knob-indent4 {!IF(filter.isForceExpandLevels,'knob-neg','')}" name="knob"></a></apex:outputPanel>
																													<span class="cage indent4" >
																														<a href="javascript:void(0);" class="title-desc-btn">{!row5.title}</a>
																													</span></td>
																												</apex:outputPanel>
																												<apex:outputPanel layout="none" rendered="{!AND(colLev5.isPrice,colLev5.isDisplayColumn)}"><td class="ct-price">&nbsp;</td></apex:outputPanel>
																												<apex:outputPanel layout="none" rendered="{!colLev5.isAction}">
																													<td class="ct-action">
																														<apex:outputPanel layout="none" rendered="{!row5.action['empty']}">&nbsp;</apex:outputPanel>
																														<apex:outputPanel layout="none" rendered="{!NOT(row5.action['empty'])}">
																															<apex:outputPanel layout="none" rendered="{!row5.action['isText']}">{!row5.action['textLabel']}</apex:outputPanel>
																															<apex:outputPanel layout="none" rendered="{!row5.action['isLink']}">
																																<apex:outputPanel layout="none" rendered="{!row5.action['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row5.action['linkValue']}')">{!row5.action['linkLabel']}</a></apex:outputPanel>
																																<apex:outputPanel layout="none" rendered="{!NOT(row5.action['isActionable'])}"><a href="{!row5.action['linkValue']}" class="{!row5.action['linkClass']}" name="{!row5.action['linkName']}">{!row5.action['linkLabel']}</a></apex:outputPanel>
																															</apex:outputPanel>
																														</apex:outputPanel>
																													</td>
																												</apex:outputPanel>
																												<apex:outputPanel layout="none" rendered="{!colLev5.isURL}">
																													<td class="{!colLev5.className} ct-url">
																														<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(row5[colLev5.getterName]))}"><a target="_blank" href="{!row5[colLev5.getterName]}">{!row5[colLev5.getterName]}</a></apex:outputPanel>
																														<apex:outputPanel layout="none" rendered="{!ISBLANK(row5[colLev5.getterName])}">&nbsp;</apex:outputPanel>
																													</td>
																												</apex:outputPanel>
																											</apex:outputPanel>
																											<apex:outputPanel layout="none" rendered="{!AND(colLev5.isSimple, colLev5.isDisplayColumn)}">
																												<apex:outputPanel layout="none"><td class="{!colLev5.className}">{!IF(colLev5.customLabel == $Label.CFSP_COMMON_LABEL_TRAINING_UNIT_COST,' ',row5[colLev5.getterName])}</td></apex:outputPanel>
																											</apex:outputPanel>
																										</apex:repeat>
																									</tr>
																									<tr class="collapsed type-Description" style ="display:{!showDescription}">
																										<td class="ct-description" colspan="{!enabledColumnsSize}"><span class="desc indent4">{!row5.description}&nbsp;</span></td>
																									</tr>

																									<apex:outputPanel layout="none" rendered="{!AND(row5.isItem, row5.isEvent)}">
																										<tr class="fork collapsed {!IF(filter.isForceExpandLevels,'expanded','')}">
																											<td colspan="{!enabledColumnsSize}">
																												<div class="agenda-container">
																													<table class="inner-table agenda">
																														<tr><apex:repeat value="{!columnsEvent}" var="colEventHeader5">
																															<th class="unsortable-header {!colEventHeader5.className}">{!$Label[colEventHeader5.label]}</th>
																														</apex:repeat></tr>

																														<apex:outputPanel layout="none" rendered="{!OR(ISBLANK(row5.event.classes), row5.event.classes.size=0)}">
																															<tr><td colspan="{!columnsEvent.size}"><span>{!$Label.CFSP_COMMON_LABEL_CLASSES_ENDED}</span></td></tr>
																														</apex:outputPanel>

																														<apex:repeat value="{!row5.event.classes}" var="class">
																															<apex:variable var="classColumnsCounter" value="{!IF(row5.event.enrolled,enabledClassColumns-1,enabledClassColumns)}"/>
																															<apex:repeat value="{!class.sessions}" var="session"><tr>
																																<apex:repeat value="{!columnsEvent}" var="colEvent5">
																																	<apex:outputPanel layout="none" rendered="{!AND(classColumnsCounter>0,OR(colEvent5.isEventClass, colEvent5.isAction))}">
																																		<td rowspan="{!class.sessions.size}" class="ct-eventclass {!colEvent5.className}">
																																			<apex:outputPanel layout="none" rendered="{!colEvent5.isSimple}">{!class[colEvent5.getterName]}</apex:outputPanel>
																																			<apex:outputPanel layout="none" rendered="{!NOT(colEvent5.isSimple)}">
																																				<apex:outputPanel layout="none" rendered="{!colEvent5.isEventClassMaterials}">
																																					<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(class.materials)), class.materials.size>0)}">
																																						<a href="javascript:void(0);" onclick="doAction('{!class.materialsAction}');">{!$Label.CFSP_COMMON_LINK_DETAILS}</a>
																																					</apex:outputPanel>
																																					<apex:outputPanel layout="none" rendered="{!AND(NOT(ISBLANK(class.materials)), class.materials.size=0)}">&nbsp;</apex:outputPanel>
																																				</apex:outputPanel>
																																				<apex:outputPanel layout="none" rendered="{!colEvent5.isAction}">
																																					<apex:outputPanel layout="none" rendered="{!row5.action[class.classId]['empty']}">&nbsp;</apex:outputPanel>
																																					<apex:outputPanel layout="none" rendered="{!NOT(row5.action[class.classId]['empty'])}">
																																						<apex:outputPanel layout="none" rendered="{!row5.action[class.classId]['isText']}">{!row5.action[class.classId]['textLabel']}</apex:outputPanel>
																																						<apex:outputPanel layout="none" rendered="{!row5.action[class.classId]['isLink']}">
																																							<apex:outputPanel layout="none" rendered="{!row5.action[class.classId]['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row5.action[class.classId]['linkValue']}')">{!row5.action[class.classId]['linkLabel']}</a></apex:outputPanel>
																																						</apex:outputPanel>
																																					</apex:outputPanel>
																																				</apex:outputPanel>
																																			</apex:outputPanel>
																																		</td>
																																		<apex:variable var="classColumnsCounter" value="{!classColumnsCounter-1}"/>
																																	</apex:outputPanel>
																																	<apex:outputPanel layout="none" rendered="{!OR(colEvent5.isEventSession, AND(colEvent5.isAction,row5.event.enrolled))}">
																																		<td class="ct-eventsession {!colEvent5.className} {!IF(session.inPast == true,'pastSession','')}">
																																			<apex:outputPanel layout="none" rendered="{!colEvent5.isSimple}">{!session[colEvent5.getterName]}</apex:outputPanel>
																																			<apex:outputPanel layout="none" rendered="{!NOT(colEvent5.isSimple)}">
																																				<apex:outputPanel layout="none" rendered="{!colEvent5.isEventSessionLocation}">
																																					<apex:outputPanel layout="none" rendered="{!AND(session.location.Name != NULL, session.location.action == NULL)}">
																																						{!session[colEvent5.getterName]}
																																					</apex:outputPanel>
																																					<apex:outputPanel layout="none" rendered="{!session.location.action != NULL}">
																																						<a href="javascript:void(0);" onclick="doAction('{!session.location.action}');">{!session[colEvent5.getterName]}</a>
																																					</apex:outputPanel>
																																				</apex:outputPanel>
																																				<apex:outputPanel layout="none" rendered="{!colEvent5.isEventSessionInstructors}">{!session[colEvent5.getterName]}</apex:outputPanel>
																																				<apex:outputPanel layout="none" rendered="{!colEvent5.isAction}">
																																					<apex:outputPanel layout="none" rendered="{!NOT(ISBLANK(session.joinURL))}">
																																						<apex:outputLink value="{!session.joinURL}" target="_blank">{!$Label.CFSP_COMMON_LINK_JOIN}</apex:outputLink>
																																					</apex:outputPanel>
																																					<apex:outputPanel layout="none" rendered="{!ISBLANK(session.joinURL)}">&nbsp;</apex:outputPanel>
																																					<apex:outputPanel layout="none" rendered="{!AND(row5.action[class.classId]['isLink'], NOT(row5.event.enrolled))}">
																																						<apex:outputPanel layout="none" rendered="{!row5.action[class.classId]['isActionable']}"><a href="javascript:void(0);" onclick="doAction('{!row5.action[class.classId]['linkValue']}')">{!row5.action[class.classId]['linkLabel']}</a></apex:outputPanel>
																																					</apex:outputPanel>
																																				</apex:outputPanel>
																																			</apex:outputPanel>
																																		</td>
																																	</apex:outputPanel>
																																</apex:repeat></tr>
																															</apex:repeat>
																														</apex:repeat>
																												</table></div>
																											</td>
																										</tr>
																									</apex:outputPanel>
																								</apex:repeat>
																							</tbody></table></td></tr>
																						</apex:repeat>
																					</apex:repeat>
																				</tbody></table></td></tr>
																			</apex:repeat>
																		</apex:repeat>
																	</tbody></table></td></tr>
																</apex:repeat>
															</apex:repeat>
														</tbody></table></td></tr>
													</apex:repeat>
												</apex:repeat>
											</tbody>
										</table>
									</apex:Form>
								</div>
							</div>
						</apex:outputPanel>
					</apex:outputPanel>
				</div>
			</apex:outputPanel>
			<script>
				window.onkeypress = handleKeyPress;

				function displaySelectLongValues() {
					$('.span12.fl-location-sellist').find('option').each(function () {
						$(this).attr('title',$(this).val());
					});
					$('.span12.fl-catalog-sellist').find('option').each(function () {
						$(this).attr('title',$(this).val());
					});
				}

				function handleKeyPress(e) {
					var eventInstance = window.event ? event : e;
					var keyCode = eventInstance.charCode ? eventInstance.charCode : eventInstance.keyCode;

					if (keyCode == 13) {
						if ($('div.lightbox').css('display') == 'none') {
							applyFilter();
						}
						else {
							$('div.lightbox div div div div.control-group button.btn').eq(0).click();
						}
						return false;
					}
				}
			</script>
			<apex:includeScript value="{!URLFOR($Resource.CFSP,'js/launch.js')}"/>
		</apex:define>
	</apex:composition>
</apex:page>